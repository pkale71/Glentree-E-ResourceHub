let pool = require('../../databaseConnection/createconnection')
let db = {};
 
db.getSyllabus = () => {
    return new Promise((resolve, reject)=>{
        try
        {
            pool.query(`SELECT * ,(SELECT COUNT(s.syllabus_id) FROM school s 
            WHERE s.syllabus_id LIKE sy.id)  AS isExist 
            from syllabus sy`,(error, result) => 
            {
                if(error)
                {
                    return reject(error);
                }          
                return resolve(result);
            });
        }
        catch(e){ console.log(e)}
        
    });
}

db.deleteSyllabus = (id) => {
    return new Promise((resolve, reject)=>{
        try
        {
            pool.query("DELETE FROM syllabus WHERE id = ?", [id], (error, result) => 
            {
                if(error)
                {
                    return reject(error);
                }          
                return resolve(result);
            });
        }
        catch(e){ console.log(e)}
        
    });
}

db.insertSyllabus = (name) => {
    return new Promise((resolve, reject)=>{
        try
        {
            pool.query("INSERT INTO syllabus (name) VALUES (?)", [name], (error, result) => 
            {
                if(error)
                {
                    return reject(error);
                }          
                return resolve(result);
            });
        }
        catch(e){ console.log(e)}
        
    });
}

db.selectSchool = (id) => {
    return new Promise((resolve, reject)=>{
        try
        {
            pool.query("SELECT *, COUNT(syllabus_id) AS Exist FROM school WHERE syllabus_id LIKE ?", [id], (error, result) => 
            {
                if(error)
                {
                    return reject(error);
                }          
                return resolve(result);
            });
        }
        catch(e){ console.log(e)}
        
    });
}

module.exports = db

